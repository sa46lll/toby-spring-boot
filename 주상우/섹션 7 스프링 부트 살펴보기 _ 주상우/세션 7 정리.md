# 세션 7 정리

### 빈 팩토리와 애플리케이션 컨텍스트 >  스프링 프레임워크의 두 가지 주요한 빈 유형

---

1. **애플리케이션 빈**
    - 이들은 개발자가 명시적으로 구성 정보를 제공하여 사용하도록 설정한 빈들입니다. 즉, 개발자가 필요에 따라 정의하고 구성한 빈들을 의미합니다.
2. **컨테이너 인프라스트럭처 빈**
    - 이들은 스프링 컨테이너 자체에 의해 사용되거나, 스프링 컨테이너가 기능 확장 과정에서 추가한 빈들입니다. 개발자가 직접 등록을 요청하지 않아도, 컨테이너가 자동으로 빈으로 등록하여 사용합니다. 여기에는 다음과 같은 예시가 있습니다:
        - **ApplicationContext**: 컨테이너 자신을 빈으로 등록하여 접근 가능하게 함.
        - **Environment**: 외부 설정이나 환경 정보에 접근하기 위한 빈.
        - **BeanPostProcessor, BeanFactoryPostProcessor**: 빈 객체의 생성, 초기화, 관계 설정, 라이프 사이클 관리 과정에서 추가 기능을 제공하는 빈들.
        - **DefaultAdvisorAutoProxyCreator**: AOP 등록을 위한 빈.
    
    이러한 컨테이너 인프라스트럭처 빈들은 일반적으로 애플리케이션의 주요 관심사가 아니며, 대부분의 경우 애플리케이션에서 직접 조회하거나 참조하지 않습니다. 하지만 필요한 경우, 의존성 주입(DI)을 통해 이러한 빈들을 활용할 수도 있습니다.
    

### 애플리케이션 빈 두 가지 종류

| 빈의 유형 | 설명 | 등록 방법 | 예시 |
| --- | --- | --- | --- |
| 애플리케이션 로직 빈 | 애플리케이션의 기능(비즈니스 로직, 도메인 로직)을 담고 있는 클래스로 만들어지는 빈들. | 컴포넌트 스캔(ComponentScan) - 사용자가 직접 구성 정보를 등록 | 컨트롤러 빈, 서비스 빈 |
| 애플리케이션 
인프라스트럭처 빈
(인프라 빈) | 기술과 관련된 로직을 담고 있는 빈들로, 주로 라이브러리를 사용하여 만들어진다. | 자동 구성(AutoConfiguration) - 자동으로 등록됨 | DataSource, JpaEntityManagerFactory, JdbcTransactionManager |

### AutoConfiguration 내 **`@Configuration`**과 **`@Conditional`** 어노테이션을 이해

---

두 어노테이션은 AutoConfiguration의 핵심적인 부분으로, Spring Boot가 제공하는 Convention over Configuration을 실현하는 데 기여함 즉 , 개발자가 수행해야 할 설정을 최소화하면서도 필요한 경우에는 세부 설정을 자유롭게 할 수 있도록하게 합니다. 

 

[Convention over configuration](https://en.wikipedia.org/wiki/Convention_over_configuration)

1. **@Configuration**:
    - **역할**: 클래스가 Spring의 설정 클래스임을 나타내며, 이 클래스에서 **`@Bean`** 어노테이션을 통해 스프링 빈을 정의합니다. 이렇게 정의된 빈들은 스프링 컨테이너에 의해 관리됩니다.
    - **AutoConfiguration에서의 사용**: 특정 라이브러리나 프레임워크가 클래스패스에 있을 때, 이에 맞춰 자동으로 필요한 빈들(예: EntityManagerFactory, DataSource)을 생성하고 설정합니다.
    - **일반적인 사용 예**: 데이터베이스 연결을 설정하는 빈을 정의하는 것과 같이, 애플리케이션에서 필요한 다양한 객체들을 설정하는 데 사용됩니다.
2. **@Conditional**:
    - **역할**: 특정 조건이 충족될 때만 설정 클래스나 빈을 활성화합니다. 이를 통해 Spring Boot는 필요에 따라 적절한 설정을 자동으로 적용합니다.
    - **조건 예시**: **`@ConditionalOnClass`**는 특정 클래스가 클래스패스에 존재할 때만 특정 빈이나 설정을 활성화합니다. 이는 다양한 환경(예: JPA 유/무, 특정 데이터베이스 사용 유/무)에 따라 유연하게 동작하도록 합니다.
    - **일반적인 사용 예**: 특정 클래스의 존재 여부, 환경 변수의 설정 등에 따라 빈을 생성하거나 특정 설정을 적용합니다.

이러한 어노테이션을 사용했을 때 장점 

1. **커스터마이징 용이성**: 기본 제공되는 AutoConfiguration을 이해하고, 필요에 따라 커스텀 AutoConfiguration을 만들거나 기존 설정을 오버라이드할 수 있습니다.
2. **문제 해결 능력**: 어떤 문제가 발생했을 때, AutoConfiguration의 동작 방식을 이해하면 더 빠르고 정확하게 문제의 원인을 파악하고 해결할 수 있습니다.